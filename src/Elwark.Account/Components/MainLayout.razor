@using Elwark.Account.Services
@inherits LayoutComponentBase

<MudThemeProvider Theme="@ThemeService.Theme" IsDarkMode="@ThemeService.IsDarkMode"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar Elevation="25">
        <img src="https://res.cloudinary.com/elwark/image/upload/v1613019547/Elwark/white/36x36.png" alt="Elwark logo">
        <MudSpacer/>
        <LanguageDropdown/>
        <MudIconButton Icon="@ThemeService.Icon" Color="Color.Inherit" OnClick="@ThemeService.ToggleAsync"/>
        <MudIconButton Icon="@Icons.Material.Outlined.Login" Color="Color.Inherit" OnClick="@OnLogout"/>
    </MudAppBar>

    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code
{
    [Inject]
    private NavigationManager Navigation { get; set; } = default!;
    
    [Inject]
    private ThemeService ThemeService { get; set; } = default!;
    
    private void OnLogout() =>
        Navigation.NavigateToLogout("/authentication/logout");
}
